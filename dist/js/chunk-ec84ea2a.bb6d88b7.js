(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec84ea2a"],{"4fa1":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-15"},[s("div",{staticClass:"catalogue"},[s("div",{staticClass:"thumb",style:{backgroundImage:"url("+t.detail.image+")"}},[s("div",{staticClass:"duration"},[t._v("全部"+t._s(t.detail.period)+"集")])]),s("div",{staticClass:"title"},[s("div",{staticClass:"fz-16 c3"},[t._v(t._s(t.detail.name))]),s("div",{staticClass:"fz-16 text-price"},[t._v("¥"+t._s(t.detail.price))])])]),s("ul",{staticClass:"cell-group"},[t._m(0),s("li",{staticClass:"cell"},[s("div",{staticClass:"cell__title"},[t._v("商品金额")]),s("div",{staticClass:"cell__value"},[t._v("￥"+t._s(t.detail.price))])]),s("li",{staticClass:"cell"},[s("div",{staticClass:"cell__title"},[t._v("优惠码抵扣")]),s("div",{staticClass:"cell__value"},[t.discounts?s("span",{staticClass:"text-primary"},[t._v("-￥"+t._s(t.coupon.amount))]):s("span",{staticClass:"text-primary text-underline",on:{click:t.showCouponModel}},[t._v("有优惠码？")])])])]),s("footer",{staticClass:"footer-bar flex flex-align-center"},[s("div",{staticClass:"price"},[s("span",{staticClass:"fz-15 text-price fw-700"},[t._v("¥"+t._s(t._f("toF")(t.detail.price-(t.coupon.amount||0))))])]),s("div",{staticClass:"btn-youya",on:{click:t.submitOrder}},[t._v("去支付")])]),s("van-popup",{model:{value:t.isShowCouponModel,callback:function(e){t.isShowCouponModel=e},expression:"isShowCouponModel"}},[s("div",{staticClass:"prompt-box"},[s("h2",{staticClass:"fz-17 c3 fw-700 text-center mb-15"},[t._v("请输入优惠码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"input-item mb-10",attrs:{type:"text"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),s("div",[s("button",{staticClass:"btn-primary mr-10",on:{click:t.hideCouponModel}},[t._v("取消")]),s("button",{staticClass:"btn-info",on:{click:t.getCouponCode}},[t._v("确认")])])])])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"cell"},[s("div",{staticClass:"cell__title"},[t._v("支付方式")]),s("div",{staticClass:"cell__value"},[t._v("微信支付")])])}],i=(s("c5f6"),s("96cf"),s("3b8d")),n={components:{},props:{},data:function(){return{couponCode:"",discounts:!1,isShowCouponModel:!1,detail:{},coupon:{}}},watch:{},computed:{},methods:{showCouponModel:function(){this.isShowCouponModel=!0},hideCouponModel:function(){this.isShowCouponModel=!1},getCouponCode:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.couponCode){t.next=3;break}return this.$toast("请输入优惠码"),t.abrupt("return");case 3:return this.$toast.loading({message:"加载中..."}),t.next=6,axios.get("/user/course-order/code?code=".concat(this.couponCode));case 6:e=t.sent,s=e.code,a=e.data,o=e.message,this.isShowCouponModel=!1,this.$toast.clear(),0==s?(this.coupon=a,this.discounts=!0):this.$toast(o);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({message:"加载中..."}),t.next=3,axios.get("/course/detail",{params:{id:this.$route.params.id}});case 3:e=t.sent,s=e.code,a=e.data,o=e.message,0==s?(this.$toast.clear(),this.detail=a):this.$toast.fail(o);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),submitOrder:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({message:"加载中..."}),t.next=3,axios.post("/user/course-order",{course_id:this.$route.params.id,code:this.couponCode});case 3:e=t.sent,s=e.code,a=e.data,o=e.message,0==s?(this.$toast.clear(),console.log(a),this.payed(a.id)):this.$toast.fail(o);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),payed:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var s,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/user/course-order/payed",{order_id:e});case 2:s=t.sent,a=s.code,o=s.data,i=s.message,0==a?console.log(o):this.$toast.fail(i);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){this.getData(),this.payed(7)},mounted:function(){},filters:{toF:function(t){var e=Number(t);return console.log(Number(t)),isNaN(e)?"错误参数":e.toFixed(2)}}},r=n,c=(s("de62"),s("2877")),u=Object(c["a"])(r,a,o,!1,null,null,null);e["default"]=u.exports},5941:function(t,e,s){},de62:function(t,e,s){"use strict";var a=s("5941"),o=s.n(a);o.a}}]);
//# sourceMappingURL=chunk-ec84ea2a.bb6d88b7.js.map