(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3580aca6"],{"02f4":function(e,t,r){var a=r("4588"),n=r("be13");e.exports=function(e){return function(t,r){var s,i,o=String(n(t)),c=a(r),u=o.length;return c<0||c>=u?e?"":void 0:(s=o.charCodeAt(c),s<55296||s>56319||c+1===u||(i=o.charCodeAt(c+1))<56320||i>57343?e?o.charAt(c):s:e?o.slice(c,c+2):i-56320+(s-55296<<10)+65536)}}},"0390":function(e,t,r){"use strict";var a=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?a(e,t).length:1)}},"0bfb":function(e,t,r){"use strict";var a=r("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"214f":function(e,t,r){"use strict";r("b0c5");var a=r("2aba"),n=r("32e9"),s=r("79e5"),i=r("be13"),o=r("2b4c"),c=r("520a"),u=o("species"),d=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var p=o(e),f=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=f?!s((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[p](""),!t})):void 0;if(!f||!g||"replace"===e&&!d||"split"===e&&!l){var h=/./[p],v=r(i,p,""[e],(function(e,t,r,a,n){return t.exec===c?f&&!n?{done:!0,value:h.call(t,r,a)}:{done:!0,value:e.call(r,t,a)}:{done:!1}})),m=v[0],x=v[1];a(String.prototype,e,m),n(RegExp.prototype,p,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}}},"520a":function(e,t,r){"use strict";var a=r("0bfb"),n=RegExp.prototype.exec,s=String.prototype.replace,i=n,o="lastIndex",c=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e[o]||0!==t[o]}(),u=void 0!==/()??/.exec("")[1],d=c||u;d&&(i=function(e){var t,r,i,d,l=this;return u&&(r=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),c&&(t=l[o]),i=n.call(l,e),c&&i&&(l[o]=l.global?i.index+i[0].length:t),u&&i&&i.length>1&&s.call(i[0],r,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(i[d]=void 0)})),i}),e.exports=i},"5f1b":function(e,t,r){"use strict";var a=r("23c6"),n=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var s=r.call(e,t);if("object"!==typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"80ef":function(e,t,r){"use strict";var a=r("b168"),n=r.n(a);n.a},a481:function(e,t,r){"use strict";var a=r("cb7c"),n=r("4bf8"),s=r("9def"),i=r("4588"),o=r("0390"),c=r("5f1b"),u=Math.max,d=Math.min,l=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,(function(e,t,r,h){return[function(a,n){var s=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,s,n):r.call(String(s),a,n)},function(e,t){var n=h(r,e,this,t);if(n.done)return n.value;var l=a(e),p=String(this),f="function"===typeof t;f||(t=String(t));var m=l.global;if(m){var x=l.unicode;l.lastIndex=0}var y=[];while(1){var b=c(l,p);if(null===b)break;if(y.push(b),!m)break;var _=String(b[0]);""===_&&(l.lastIndex=o(p,s(l.lastIndex),x))}for(var w="",$=0,S=0;S<y.length;S++){b=y[S];for(var k=String(b[0]),C=u(d(i(b.index),p.length),0),R=[],q=1;q<b.length;q++)R.push(g(b[q]));var j=b.groups;if(f){var A=[k].concat(R,C,p);void 0!==j&&A.push(j);var E=String(t.apply(void 0,A))}else E=v(k,p,C,R,j,t);C>=$&&(w+=p.slice($,C)+E,$=C+k.length)}return w+p.slice($)}];function v(e,t,a,s,i,o){var c=a+e.length,u=s.length,d=f;return void 0!==i&&(i=n(i),d=p),r.call(o,d,(function(r,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(c);case"<":o=i[n.slice(1,-1)];break;default:var d=+n;if(0===d)return r;if(d>u){var p=l(d/10);return 0===p?r:p<=u?void 0===s[p-1]?n.charAt(1):s[p-1]+n.charAt(1):r}o=s[d-1]}return void 0===o?"":o}))}}))},b0c5:function(e,t,r){"use strict";var a=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},b168:function(e,t,r){},e3a5:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[2==e.type?r("div",[e.address?r("router-link",{attrs:{to:{name:"address_list"}}},[r("div",{staticClass:"address"},[r("img",{attrs:{src:"img/icon-dingwei.png",alt:""}}),r("div",{staticClass:"fz-15 ml-10 c3",staticStyle:{width:"80%"}},[r("div",[e._v(e._s(e.address.name)+" "+e._s(e.address.phone))]),r("div",{staticClass:"text-hide"},[e._v(e._s(e.address.province)+e._s(e.address.city)+e._s(e.address.area)+e._s(e.address.address))])]),r("van-icon",{attrs:{name:"arrow",size:"15px",color:"#999"}})],1)]):r("div",{staticClass:"address"},[r("router-link",{attrs:{to:{name:"address_edit"}}},[r("div",{staticClass:"fz-16 c6"},[r("span",[e._v("暂无地址，请去")]),r("span",{staticClass:"text-price"},[e._v("添加地址")])])])],1),r("div",{staticClass:"bar-10"})],1):e._e(),r("div",{staticClass:"goods-item"},[r("img",{attrs:{src:e.goods.image,alt:""}}),r("div",{staticClass:"ml-10 flex flex-column flex-jus",staticStyle:{flex:"1"}},[r("div",{staticClass:"fz-15 c3"},[e._v(e._s(e.goods.title))]),r("div",{staticClass:"flex flex-jus flex-align-end"},[r("div",{staticClass:"fz-15 c3"},[e._v("¥"+e._s(e.goods.price))]),r("van-stepper",{attrs:{integer:""},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)])]),r("van-cell",{attrs:{border:!1,title:"留言"}}),r("div",{staticClass:"plr-10"},[r("van-field",{attrs:{placeholder:"给卖家留言～～"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),r("div",{staticClass:"footer-bar"},[r("div",[r("span",{staticClass:"fz-15 c9"},[e._v("合计：")]),r("span",{staticClass:"fz-15 text-price"},[e._v("￥"+e._s(e.quantity*e.goods.price))])]),r("div",{staticClass:"btn-youya",on:{click:e.submit}},[e._v("提交订单")])])],1)},n=[],s=(r("c5f6"),r("a481"),r("96cf"),r("3b8d")),i=r("18a0"),o=r.n(i),c={components:{},props:{},data:function(){return{address:"",value:1,message:"",type:"",goods_id:"",quantity:"",goods:{},order_id:""}},watch:{},computed:{},methods:{getGoods:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"加载中..."}),e.next=3,axios.get("/mall/detail?id=".concat(this.goods_id));case 3:t=e.sent,r=t.code,a=t.data,n=t.message,0==r?(this.$toast.clear(),this.goods=a):this.$toast.fail(n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAddress:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/user/address-first");case 2:t=e.sent,r=t.code,a=t.data,t.message,0==r&&(this.address=a);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],t.push({goods_id:this.goods_id,quantity:this.quantity}),this.$toast.loading({message:"提交中..."}),r={type:this.type,goods:JSON.stringify(t),share_id:this.$route.query.share_id},2==r.type&&(r.address_id=this.address.id),e.next=7,axios.post("/user/mall-order",r);case 7:a=e.sent,n=a.code,s=a.data,i=a.message,0==n?(this.$toast.clear(),this.order_id=s.id,1==s.status?(this.$toast.success("支付成功"),this.$router.replace("/feedback")):this.pay(s.id)):this.$toast.fail(i);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),payed:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"支付中..."}),e.next=3,axios.post("/user/mall-order/payed",{order_id:t});case 3:r=e.sent,a=r.code,n=r.data,s=r.message,0==a?(this.$toast.clear(),console.log(n),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):this.$toast.fail(s);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSDK:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=encodeURIComponent(window.location.href),e.next=3,axios.get("/config/jsjdk?url="+t);case 3:r=e.sent,a=r.data,n=r.code,r.message,0==n&&o.a.config({debug:!1,appId:a.appId,timestamp:Number(a.timestamp),nonceStr:a.nonceStr,signature:a.signature,jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]});case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),pay:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/user/mall-order/pay?order_id="+t);case 2:r=e.sent,a=r.data,n=r.code,r.message,0==n&&o.a.chooseWXPay({appId:a.appId,timestamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success:function(e){s.$toast.success("支付成功"),s.$router.push({name:"goods_pay_feedback",query:{order_id:s.order_id}})},fail:function(e){s.$toast.fail("支付失败")}});case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){this.type=this.$route.query.type,this.goods_id=this.$route.query.goods_id,this.quantity=this.$route.query.quantity,this.getGoods(),this.getSDK(),2==this.type&&this.getAddress()},mounted:function(){}},u=c,d=(r("80ef"),r("2877")),l=Object(d["a"])(u,a,n,!1,null,"3b251636",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-3580aca6.c307917f.js.map