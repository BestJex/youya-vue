(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49255188"],{c244:function(e,t,s){"use strict";var a=s("c7a1"),r=s.n(a);r.a},c7a1:function(e,t,s){},e3a5:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[2==e.type?s("div",[e.address?s("router-link",{attrs:{to:{name:"address_list"}}},[s("div",{staticClass:"address"},[s("img",{attrs:{src:"img/icon-dingwei.png",alt:""}}),s("div",{staticClass:"fz-15 ml-10 c3",staticStyle:{width:"80%"}},[s("div",[e._v(e._s(e.address.name)+" "+e._s(e.address.phone))]),s("div",{staticClass:"text-hide"},[e._v(e._s(e.address.province)+e._s(e.address.city)+e._s(e.address.area)+e._s(e.address.address))])]),s("van-icon",{attrs:{name:"arrow",size:"15px",color:"#999"}})],1)]):s("div",{staticClass:"address"},[s("router-link",{attrs:{to:{name:"address_edit"}}},[s("div",{staticClass:"fz-16 c6"},[s("span",[e._v("暂无地址，请去")]),s("span",{staticClass:"text-price"},[e._v("添加地址")])])])],1),s("div",{staticClass:"bar-10"})],1):e._e(),s("div",{staticClass:"goods-item"},[s("img",{attrs:{src:e.goods.image,alt:""}}),s("div",{staticClass:"ml-10 flex flex-column flex-jus",staticStyle:{flex:"1"}},[s("div",{staticClass:"fz-15 c3"},[e._v(e._s(e.goods.title))]),s("div",{staticClass:"flex flex-jus flex-align-end"},[s("div",{staticClass:"fz-15 c3"},[e._v("¥"+e._s(e.goods.price))]),s("van-stepper",{attrs:{integer:""},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)])]),s("van-cell",{attrs:{border:!1,title:"留言"}}),s("div",{staticClass:"plr-10"},[s("van-field",{attrs:{placeholder:"给卖家留言～～"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("div",{staticClass:"footer-bar"},[s("div",[s("span",{staticClass:"fz-15 c9"},[e._v("合计：")]),s("span",{staticClass:"fz-15 text-price"},[e._v("￥"+e._s(e.quantity*e.goods.price))])]),s("div",{staticClass:"btn-youya",on:{click:e.submit}},[e._v("提交订单")])])],1)},r=[],i=(s("c5f6"),s("96cf"),s("3b8d")),n=s("18a0"),o=s.n(n),c={components:{},props:{},data:function(){return{address:"",value:1,message:"",type:"",goods_id:"",quantity:"",goods:{},order_id:""}},watch:{},computed:{},methods:{getGoods:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"加载中..."}),e.next=3,axios.get("/mall/detail?id=".concat(this.goods_id));case 3:t=e.sent,s=t.code,a=t.data,r=t.message,0==s?(this.$toast.clear(),this.goods=a):this.$toast.fail(r);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAddress:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/user/address-first");case 2:t=e.sent,s=t.code,a=t.data,t.message,0==s&&(this.address=a);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],t.push({goods_id:this.goods_id,quantity:this.quantity}),this.$toast.loading({message:"提交中..."}),s={type:this.type,goods:JSON.stringify(t),share_id:this.$route.query.share_id},2==s.type&&(s.address_id=this.address.id),e.next=7,axios.post("/user/mall-order",s);case 7:a=e.sent,r=a.code,i=a.data,n=a.message,0==r?(this.$toast.clear(),console.log(i),this.order_id=i.id,this.pay(i.id)):this.$toast.fail(n);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),payed:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({message:"支付中..."}),e.next=3,axios.post("/user/mall-order/payed",{order_id:t});case 3:s=e.sent,a=s.code,r=s.data,i=s.message,0==a?(this.$toast.clear(),console.log(r),this.$router.push({name:"goods_pay_feedback",query:{order_id:this.order_id}})):this.$toast.fail(i);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSDK:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=encodeURIComponent(window.location.href),e.next=3,axios.get("/config/jsjdk?url="+t);case 3:s=e.sent,a=s.data,r=s.code,s.message,0==r&&o.a.config({debug:!1,appId:a.appId,timestamp:Number(a.timestamp),nonceStr:a.nonceStr,signature:a.signature,jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]});case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),pay:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/user/mall-order/pay?order_id="+t);case 2:s=e.sent,a=s.data,r=s.code,s.message,0==r&&o.a.chooseWXPay({appId:a.appId,timestamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success:function(e){i.$toast.success("支付成功"),i.$router.push({name:"goods_pay_feedback",query:{order_id:i.order_id}})},fail:function(e){i.$toast.fail("支付失败")}});case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){this.type=this.$route.query.type,this.goods_id=this.$route.query.goods_id,this.quantity=this.$route.query.quantity,this.getGoods(),this.getSDK(),2==this.type&&this.getAddress()},mounted:function(){}},d=c,u=(s("c244"),s("2877")),p=Object(u["a"])(d,a,r,!1,null,"6b0c3e95",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-49255188.1d64fa7a.js.map